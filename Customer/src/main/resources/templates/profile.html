<!DOCTYPE html>
<html lang="en" xmlns:th = "https://www.thymeleaf.org/">
<head th:replace="~{fragments::header}">
</head>
<body>
<div th:replace="~{fragments::navbar}">
</div>
<section class="vh-100" style="margin-top: -40px">
    <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col col-lg-6 mb-4 mb-lg-0">
                <div class="card mb-3" style="border-radius: 0.5rem">
                    <div class="row g-0">
                        <div
                                class="col-md-4 gradient-custom text-center text-white"
                                style="
                    border-top-left-radius: 0.5rem;
                    border-bottom-left-radius: 0.5rem;
                  "
                        >
                            <img
                                    src="img/profile.png"
                                    alt="Avatar"
                                    class="img-fluid my-5"
                                    style="width: 80px"
                            />
                            <h5>Customer Name</h5>
                            <p th:text="${customerDto.name}"></p>
                        </div>
                        <div class="col-md-8">
                            <form th:action="@{/profile}" method="post" th:object="${customerDto}">
                                <input type="hidden" th:field="*{id}" name="id" />
                                <input type="hidden" th:field="*{confirmPassword}" name="confirmPassword" />
                                <input type="hidden" th:field="*{password}" name="password" />
                                <div class="card-body p-4">
                                    <h6>Information</h6>
                                    <hr class="mt-0 mb-4" />
                                    <div th:if="${errors}" class="alert alert-danger" role="alert" th:text="${errors}">
                                    </div>
                                    <div th:if="${success}" class="alert alert-success" role="alert" th:text="${success}">
                                    </div>
                                    <div class="row pt-1">
                                        <div class="col-23 mb-3">
                                            <label class="form-label" for="inputUsername"
                                            ><h6>Username</h6></label>
                                            <input
                                                    type="text"
                                                    placeholder="Username"
                                                    class="form-control"
                                                    name="name"
                                                    th:field="*{name}"
                                                    id="inputUsername"
                                                    th:classappend="${#fields.hasErrors('name')} ? 'is-invalid' : ''" autofocus
                                            />
                                            <div class="invalid-feedback"  th:errors ="*{name}">
                                            </div>
                                        </div>
                                        <div class="col-6 mb-3">
                                            <label class="form-label" for="inputEmail"><h6>Email</h6></label>
                                            <input
                                                    type="email"
                                                    placeholder="email"
                                                    class="form-control"
                                                    name="username"
                                                    th:field="*{username}"
                                                    id="inputEmail"
                                                    th:classappend="${#fields.hasErrors('username')} ? 'is-invalid' : ''" autofocus
                                            />
                                            <div class="invalid-feedback"  th:errors ="*{username}">
                                            </div>
                                        </div>
                                        <div class="col-6 mb-3">
                                            <label class="form-label" for="phoneNumber">
                                                <h6>Phone</h6></label>
                                            <input
                                                    type="text"
                                                    class="form-control"
                                                    th:field="*{noTelp}"
                                                    name="noTelp"
                                                    id="phoneNumber"
                                                    th:classappend="${#fields.hasErrors('noTelp')} ? 'is-invalid' : ''" autofocus
                                            />
                                            <div class="invalid-feedback"  th:errors ="*{noTelp}">
                                            </div>
                                        </div>
                                        <div class="col-12 mb-3">
                                            <label class="form-label" for="address"><h6>Address</h6></label>
                                            <textarea
                                                    name="address"
                                                    class="form-control"
                                                    id="address"
                                                    cols="52"
                                                    th:field="*{address}"
                                                    th:classappend="${#fields.hasErrors('address')} ? 'is-invalid' : ''" autofocus
                                                    rows="3"
                                            ></textarea>
                                            <div class="invalid-feedback"  th:errors ="*{address}">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-start">
                                        <!-- Button trigger modal -->
                                        <button
                                                type="button"
                                                class="btn btn-warning text-white me-3"
                                                data-bs-toggle="modal"
                                                data-bs-target="#staticBackdrop"
                                        >
                                            Change Password
                                        </button>
                                        <button type="submit" class="btn btn-primary">
                                            Update Profile
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Modal -->
<div
        class="modal fade"
        id="staticBackdrop"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        tabindex="-1"
        aria-labelledby="staticBackdropLabel"
        aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">
                    Change Password
                </h5>
                <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                ></button>
            </div>
            <form th:action="@{/changePassword}" method="post">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="oldPassword" class="form-label">Old Password</label>
                        <input
                                type="password"
                                id="oldPassword"
                                name="oldPassword"
                                class="form-control"
                                placeholder="Old Password"
                                minlength="5"
                                required
                        />
                    </div>
                    <div class="mb-3">
                        <label for="newPassword" class="form-label">New Password</label>
                        <input
                                type="password"
                                id="newPassword"
                                name="newPassword"
                                class="form-control"
                                minlength="5"
                                placeholder="New Password"
                                required
                        />
                    </div>
                </div>
                <div class="modal-footer">
                    <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                    >
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>
<div th:replace="~{fragments::footer}">
</div>
<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"
></script>
</body>
</html>